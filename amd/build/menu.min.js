define ("theme_wwu2019/menu",["exports","jquery","core/ajax"],function(a,b,c){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.init=function(){g();e()};b=d(b);c=d(c);function d(a){return a&&a.__esModule?a:{default:a}}function e(){var a=(0,b.default)("html"),c=(0,b.default)("#user-menu .wwu-uselighttheme"),d=(0,b.default)("#user-menu .wwu-useostheme"),e=(0,b.default)("#user-menu .wwu-usedarktheme"),g;if(a.hasClass("dark")){g=e}else if(a.hasClass("light")){g=c}else{g=d}g.addClass("selectedtheme");c.click(function(){g.removeClass("selectedtheme");a.removeClass("dark");a.addClass("light");f(1);g=c;g.addClass("selectedtheme")});d.click(function(){g.removeClass("selectedtheme");a.removeClass("dark");a.removeClass("light");f(0);g=d;g.addClass("selectedtheme")});e.click(function(){g.removeClass("selectedtheme");a.addClass("dark");a.removeClass("light");f(2);g=e;g.addClass("selectedtheme")})}function f(a){c.default.call([{methodname:"core_user_update_user_preferences",args:{preferences:[{type:"theme_wwu2019_theme",value:a}]}}])[0].fail(Notification.exception)}var h=1080;function g(){var k=null,l=null,m=null,n=null,o=null;function a(a){if(k){d(k)}f();(0,b.default)(a).addClass("open");(0,b.default)(a).children("a").attr("aria-expanded","true");k=a;l=null;m=null}function c(b){l=b;m=setTimeout(function(){a(b);o=new Date},100)}function d(a){(0,b.default)(a).removeClass("open");(0,b.default)(a).children("a").attr("aria-expanded","false");k=null;f();o=null}function e(a){n=setTimeout(d,300,a)}function f(){if(n){clearTimeout(n);n=null}}function g(){l=null;if(m){clearTimeout(m);m=null}}function i(){f();g();if(k){d(k)}}(0,b.default)("li.main-menu-item > a[aria-haspopup=\"true\"], li#user-menu > a[aria-haspopup=\"true\"]").click(function(b){if(b.currentTarget.parentNode===k){if(new Date-o>300){d(k)}}else{a(b.currentTarget.parentNode)}});var p=(0,b.default)("li.main-menu-item > a[aria-haspopup=\"true\"], li#user-menu > a[aria-haspopup=\"true\"]").parent();p.mouseenter(function(a){var b=0<window.innerWidth?window.innerWidth:screen.width;if(b>767){if(a.currentTarget===k){f()}else{c(a.currentTarget)}}});p.mouseleave(function(a){var b=0<window.innerWidth?window.innerWidth:screen.width;if(b>767){if(l&&a.currentTarget===l){g()}if(k&&a.currentTarget===k){e(a.currentTarget)}}});(0,b.default)("li.sub-menu-item > a[aria-haspopup=\"true\"], li.sub-sub-menu-item > a[aria-haspopup=\"true\"]").click(function(a){var c=(0,b.default)(a.currentTarget),d=c.parent();d.toggleClass("open");c.attr("aria-expanded",d.hasClass("open"))});var q=(0,b.default)("#main-menu-hamburger > a"),r=q.parent();q.click(function(){r.toggleClass("open");q.attr("aria-expanded",r.hasClass("open"))});var s=!1,t=!1;function j(){var a=(0,b.default)("#menu-bottom"),c=a.offset().top+16,d=0<window.innerWidth?window.innerWidth:screen.width,e=d<=767;if(e){(0,b.default)(".sub-menu-scroll-container").css("max-height","");(0,b.default)("#main-menu-left").css("max-height",(0,b.default)(window).height()-c+"px")}else{if(d<=h){c+=50}(0,b.default)(".sub-menu-scroll-container").css("max-height",(0,b.default)(window).height()-c+"px");(0,b.default)("#main-menu-left").css("max-height","")}if(e!==s){i();s=e}var f=d<=h;if(f!==t){q.attr("role",f?"button":"none");t=f}}j();(0,b.default)(window).resize(j)}});
//# sourceMappingURL=menu.min.js.map
