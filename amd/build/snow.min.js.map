{"version":3,"sources":["../src/snow.js"],"names":["canvas","desiredFlakes","flakes","intervalId","pixurl","M","cfg","wwwroot","noise","module","Grad","x","y","z","prototype","dot2","dot3","grad3","p","perm","Array","gradP","seed","Math","floor","i","v","F2","sqrt","G2","simplex2","xin","yin","n0","n1","n2","s","j","t","x0","y0","i1","j1","x1","y1","x2","y2","gi0","gi1","gi2","t0","t1","t2","fade","lerp","a","b","perlin2","X","Y","n00","n01","n10","n11","u","init","enableSnow","localStorage","getItem","insertAfter","document","createElement","height","window","innerHeight","width","innerWidth","style","position","top","left","zIndex","opacity","pointerEvents","resize","push","generateXCoord","random","r","d","ctx","getContext","snowicon","setInterval","redraw","attr","hidden","click","clearInterval","setItem","append","angle","moveFlakes","basemovement","f","length","pow","sin","splice","clearRect","fillStyle","beginPath","moveTo","arc","PI","fill"],"mappings":"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","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Manages the very important snow.\n *\n * @package    theme_wwu2019\n * @copyright  2020 Justus Dieckmann WWU\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nimport $ from 'jquery';\n\nlet canvas;\n\nlet desiredFlakes = 150;\n\n/**\n * @type {[{x: number, y: number, r: number, d: number}]}\n */\nlet flakes = [];\n\nlet intervalId = null;\n\nconst pixurl = M.cfg.wwwroot + '/theme/wwu2019/pix/';\n\nlet noise = exportNoise();\n\n/**\n * Init function\n */\nexport function init() {\n    let enableSnow = localStorage.getItem('theme_wwu2019/enable-snow') !== 'false';\n\n    $('<div class=\"mr-3\" id=\"snow-toggle\">' +\n        '<img style=\"margin-top: -6px; cursor: pointer\" width=\"35\">' +\n        '</div>').insertAfter('#main-menu-right .main-menu-additions-item');\n\n    canvas = document.createElement('canvas');\n    canvas.height = window.innerHeight;\n    canvas.width = window.innerWidth;\n    canvas.style.position = 'fixed';\n    canvas.style.top = '0';\n    canvas.style.left = '0';\n    canvas.style.zIndex = '1010';\n    canvas.style.opacity = '0.8';\n    canvas.style.pointerEvents = 'none';\n    $(window).resize(() => {\n        canvas.height = window.innerHeight;\n        canvas.width = window.innerWidth;\n        desiredFlakes = 50 + canvas.height * canvas.width * 0.0001;\n    });\n\n    desiredFlakes = 50 + canvas.height * canvas.width * 0.0001;\n\n    // Loop throught the empty flakes and apply attributes\n    for (let i = 0; i < desiredFlakes; i++) {\n        flakes.push({\n            x: generateXCoord(), // Also spawn left and right of window.\n            y: Math.random() * canvas.height,\n            r: Math.random() * 5 + 2, // Min of 2px and max of 7px\n            d: Math.random() + 1 // Density of the flake\n        });\n    }\n    let ctx = canvas.getContext(\"2d\");\n\n    let snowicon = $('#snow-toggle > img');\n\n    if (enableSnow) {\n        intervalId = setInterval(redraw, 25, ctx);\n        snowicon.attr('src', pixurl + 'snow-disable.svg');\n    } else {\n        canvas.hidden = true;\n        snowicon.attr('src', pixurl + 'snow-enable.svg');\n    }\n\n    $('#snow-toggle').click(() => {\n        if (intervalId) {\n            clearInterval(intervalId);\n            intervalId = null;\n            snowicon.attr('src', pixurl + 'snow-enable.svg');\n        } else {\n            intervalId = setInterval(redraw, 25, ctx);\n            snowicon.attr('src', pixurl + 'snow-disable.svg');\n        }\n        canvas.hidden = intervalId === null;\n        localStorage.setItem('theme_wwu2019/enable-snow', intervalId !== null ? 'true' : 'false');\n    });\n\n    $('body').append(canvas);\n\n    noise.seed(Math.random());\n}\n\n// Animate the flakes\nlet angle = 0;\n\nfunction moveFlakes() {\n    angle += 0.01;\n    let basemovement = noise.simplex2(angle * 0.1, 0) * 2.5;\n    for (let i = 0; i < flakes.length; i++) {\n        // Store current flake\n        let f = flakes[i];\n        // Update X and Y coordinates of each snowflakes\n        f.y += Math.pow(f.d, 2) + 1;\n        f.x += basemovement + Math.sin(f.d * 8 + angle) * 0.5;\n\n        // If the snowflake reaches the bottom, send a new one to the top\n        if (f.y > canvas.height + 10) {\n            if (flakes.length > desiredFlakes) {\n                flakes.splice(i, 1);\n                i--;\n            }\n            f.x = generateXCoord();\n            f.y = -10;\n        }\n    }\n    if (desiredFlakes > flakes.length && Math.random() < 0.2) {\n        flakes.push({\n            x: generateXCoord(), // Also spawn left and right of window.\n            y: -10,\n            r: Math.random() * 5 + 2, // Min of 2px and max of 7px\n            d: Math.random() + 1 // Density of the flake\n        });\n    }\n}\n\nfunction generateXCoord() {\n    return Math.random() * (canvas.width + 400) - 200;\n}\n\nfunction redraw(ctx) {\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\n    // ctx.fillStyle = \"rgba(0, 0, 0, 0.1)\";\n    // ctx.fillRect(0, 0, canvas.width, canvas.height);\n    ctx.fillStyle = \"#cbebfa\";\n    // ctx.fillStyle = \"#fff\";\n    ctx.beginPath();\n    for (let f of flakes) {\n        ctx.moveTo(f.x, f.y);\n        ctx.arc(f.x, f.y, f.r, 0, Math.PI * 2, true);\n    }\n    ctx.fill();\n    moveFlakes();\n}\n\n/*\n * A speed-improved perlin and simplex noise algorithms for 2D.\n *\n * Based on example code by Stefan Gustavson (stegu@itn.liu.se).\n * Optimisations by Peter Eastman (peastman@drizzle.stanford.edu).\n * Better rank ordering method by Stefan Gustavson in 2012.\n * Converted to Javascript by Joseph Gentle.\n *\n * Version 2012-03-09\n *\n * This code was placed in the public domain by its original author,\n * Stefan Gustavson. You may use it as you see fit, but\n * attribution is appreciated.\n *\n */\nfunction exportNoise() {\n    /* eslint-disable no-bitwise */\n    var module = {};\n\n    function Grad(x, y, z) {\n        this.x = x;\n        this.y = y;\n        this.z = z;\n    }\n\n    Grad.prototype.dot2 = function (x, y) {\n        return this.x * x + this.y * y;\n    };\n\n    Grad.prototype.dot3 = function (x, y, z) {\n        return this.x * x + this.y * y + this.z * z;\n    };\n\n    var grad3 = [new Grad(1, 1, 0), new Grad(-1, 1, 0), new Grad(1, -1, 0), new Grad(-1, -1, 0),\n        new Grad(1, 0, 1), new Grad(-1, 0, 1), new Grad(1, 0, -1), new Grad(-1, 0, -1),\n        new Grad(0, 1, 1), new Grad(0, -1, 1), new Grad(0, 1, -1), new Grad(0, -1, -1)];\n\n    var p = [151, 160, 137, 91, 90, 15,\n        131, 13, 201, 95, 96, 53, 194, 233, 7, 225, 140, 36, 103, 30, 69, 142, 8, 99, 37, 240, 21, 10, 23,\n        190, 6, 148, 247, 120, 234, 75, 0, 26, 197, 62, 94, 252, 219, 203, 117, 35, 11, 32, 57, 177, 33,\n        88, 237, 149, 56, 87, 174, 20, 125, 136, 171, 168, 68, 175, 74, 165, 71, 134, 139, 48, 27, 166,\n        77, 146, 158, 231, 83, 111, 229, 122, 60, 211, 133, 230, 220, 105, 92, 41, 55, 46, 245, 40, 244,\n        102, 143, 54, 65, 25, 63, 161, 1, 216, 80, 73, 209, 76, 132, 187, 208, 89, 18, 169, 200, 196,\n        135, 130, 116, 188, 159, 86, 164, 100, 109, 198, 173, 186, 3, 64, 52, 217, 226, 250, 124, 123,\n        5, 202, 38, 147, 118, 126, 255, 82, 85, 212, 207, 206, 59, 227, 47, 16, 58, 17, 182, 189, 28, 42,\n        223, 183, 170, 213, 119, 248, 152, 2, 44, 154, 163, 70, 221, 153, 101, 155, 167, 43, 172, 9,\n        129, 22, 39, 253, 19, 98, 108, 110, 79, 113, 224, 232, 178, 185, 112, 104, 218, 246, 97, 228,\n        251, 34, 242, 193, 238, 210, 144, 12, 191, 179, 162, 241, 81, 51, 145, 235, 249, 14, 239, 107,\n        49, 192, 214, 31, 181, 199, 106, 157, 184, 84, 204, 176, 115, 121, 50, 45, 127, 4, 150, 254,\n        138, 236, 205, 93, 222, 114, 67, 29, 24, 72, 243, 141, 128, 195, 78, 66, 215, 61, 156, 180];\n    // To remove the need for index wrapping, double the permutation table length\n    var perm = new Array(512);\n    var gradP = new Array(512);\n\n    // This isn't a very good seeding function, but it works ok. It supports 2^16\n    // different seed values. Write something better if you need more seeds.\n    module.seed = function (seed) {\n        if (seed > 0 && seed < 1) {\n            // Scale the seed out\n            seed *= 65536;\n        }\n\n        seed = Math.floor(seed);\n        if (seed < 256) {\n            seed |= seed << 8;\n        }\n\n        for (var i = 0; i < 256; i++) {\n            var v;\n            if (i & 1) {\n                v = p[i] ^ (seed & 255);\n            } else {\n                v = p[i] ^ ((seed >> 8) & 255);\n            }\n\n            perm[i] = perm[i + 256] = v;\n            gradP[i] = gradP[i + 256] = grad3[v % 12];\n        }\n    };\n\n    module.seed(0);\n\n    // Skewing and unskewing factors for 2, 3, and 4 dimensions\n    var F2 = 0.5 * (Math.sqrt(3) - 1);\n    var G2 = (3 - Math.sqrt(3)) / 6;\n\n    // 2D simplex noise\n    module.simplex2 = function(xin, yin) {\n        var n0, n1, n2; // Noise contributions from the three corners\n        // Skew the input space to determine which simplex cell we're in\n        var s = (xin + yin) * F2; // Hairy factor for 2D\n        var i = Math.floor(xin + s);\n        var j = Math.floor(yin + s);\n        var t = (i + j) * G2;\n        var x0 = xin - i + t; // The x,y distances from the cell origin, unskewed.\n        var y0 = yin - j + t;\n        // For the 2D case, the simplex shape is an equilateral triangle.\n        // Determine which simplex we are in.\n        var i1, j1; // Offsets for second (middle) corner of simplex in (i,j) coords\n        if (x0 > y0) { // Lower triangle, XY order: (0,0)->(1,0)->(1,1)\n            i1 = 1;\n            j1 = 0;\n        } else {    // Upper triangle, YX order: (0,0)->(0,1)->(1,1)\n            i1 = 0;\n            j1 = 1;\n        }\n        // A step of (1,0) in (i,j) means a step of (1-c,-c) in (x,y), and\n        // a step of (0,1) in (i,j) means a step of (-c,1-c) in (x,y), where\n        // c = (3-sqrt(3))/6\n        var x1 = x0 - i1 + G2; // Offsets for middle corner in (x,y) unskewed coords\n        var y1 = y0 - j1 + G2;\n        var x2 = x0 - 1 + 2 * G2; // Offsets for last corner in (x,y) unskewed coords\n        var y2 = y0 - 1 + 2 * G2;\n        // Work out the hashed gradient indices of the three simplex corners\n        i &= 255;\n        j &= 255;\n        var gi0 = gradP[i + perm[j]];\n        var gi1 = gradP[i + i1 + perm[j + j1]];\n        var gi2 = gradP[i + 1 + perm[j + 1]];\n        // Calculate the contribution from the three corners\n        var t0 = 0.5 - x0 * x0 - y0 * y0;\n        if (t0 < 0) {\n            n0 = 0;\n        } else {\n            t0 *= t0;\n            n0 = t0 * t0 * gi0.dot2(x0, y0); // (x,y) of grad3 used for 2D gradient\n        }\n        var t1 = 0.5 - x1 * x1 - y1 * y1;\n        if (t1 < 0) {\n            n1 = 0;\n        } else {\n            t1 *= t1;\n            n1 = t1 * t1 * gi1.dot2(x1, y1);\n        }\n        var t2 = 0.5 - x2 * x2 - y2 * y2;\n        if (t2 < 0) {\n            n2 = 0;\n        } else {\n            t2 *= t2;\n            n2 = t2 * t2 * gi2.dot2(x2, y2);\n        }\n        // Add contributions from each corner to get the final noise value.\n        // The result is scaled to return values in the interval [-1,1].\n        return 70 * (n0 + n1 + n2);\n    };\n\n    // ##### Perlin noise stuff\n\n    function fade(t) {\n        return t * t * t * (t * (t * 6 - 15) + 10);\n    }\n\n    function lerp(a, b, t) {\n        return (1 - t) * a + t * b;\n    }\n\n    // 2D Perlin Noise\n    module.perlin2 = function (x, y) {\n        // Find unit grid cell containing point\n        var X = Math.floor(x), Y = Math.floor(y);\n        // Get relative xy coordinates of point within that cell\n        x = x - X;\n        y = y - Y;\n        // Wrap the integer cells at 255 (smaller integer period can be introduced here)\n        X = X & 255;\n        Y = Y & 255;\n\n        // Calculate noise contributions from each of the four corners\n        var n00 = gradP[X + perm[Y]].dot2(x, y);\n        var n01 = gradP[X + perm[Y + 1]].dot2(x, y - 1);\n        var n10 = gradP[X + 1 + perm[Y]].dot2(x - 1, y);\n        var n11 = gradP[X + 1 + perm[Y + 1]].dot2(x - 1, y - 1);\n\n        // Compute the fade curve value for x\n        var u = fade(x);\n\n        // Interpolate the four results\n        return lerp(\n            lerp(n00, n10, u),\n            lerp(n01, n11, u),\n            fade(y));\n    };\n\n    return module;\n}"],"file":"snow.min.js"}